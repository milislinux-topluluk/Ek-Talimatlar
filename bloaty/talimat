# Tanım: İkili dosyalar için bir boyut profilci
# URL: https://github.com/google/bloaty
# Paketçi: Cihan_Alkan
# Gerekler: cmake
# Grup: 

isim=bloaty
surum=r232
devir=1

kaynak=(fix_cflags.patch)

derle() {
	if [ ! -d $DERLEME_KAYNAKDIZIN/$isim  ];then
		git clone https://github.com/google/bloaty $DERLEME_KAYNAKDIZIN/$isim 
	else
		cd $DERLEME_KAYNAKDIZIN/$isim 
		git pull
		cd -
	fi
	cp -r $DERLEME_KAYNAKDIZIN/$isim $SRC/
	cd $SRC/$isim

    rm -rf "${SRC}/build"
    mkdir "${SRC}/build"
    cd "${SRC}/build"
    cmake -G 'Unix Makefiles' \
        -DCMAKE_INSTALL_PREFIX=/usr \
        "${SRC}/bloaty"
    make

    install -Dm755 "${SRC}/build/bloaty" \
        "${PKG}/usr/bin/bloaty"
    install -Dm644 "${SRC}/bloaty/README.md" \
        "${PKG}/usr/share/doc/${isim}/README.md"
}
